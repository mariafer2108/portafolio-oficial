<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proyectos Web · Maria Fernanda</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    body { background-color: #000; color: #fff; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(16px);} to {opacity:1; transform: translateY(0);} }
    .animate-fadeIn { opacity:0; animation: fadeIn 0.6s ease-out forwards; }
    
    /* Custom Modal Sizes to ensure responsiveness without relying on Tailwind JIT */
    .custom-modal-container { width: 100%; max-width: 94vw; max-height: 57vh; }
    .custom-modal-img { max-width: 88vw; max-height: 53vh; }
     
    @media (min-width: 640px) {
      .custom-modal-container { max-width: 77vw; max-height: 53vh; }
      .custom-modal-img { max-width: 72vw; max-height: 48vh; }
    }
    @media (min-width: 768px) {
      .custom-modal-container { max-width: 55vw; max-height: 44vh; }
      .custom-modal-img { max-width: 46vw; max-height: 40vh; }
    }
    @media (min-width: 1024px) {
      .custom-modal-container { max-width: 48vw; max-height: 40vh; }
      .custom-modal-img { max-width: 42vw; max-height: 35vh; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel" data-presets="react">
    function WebPage() {
      const [nombre, setNombre] = React.useState("");
      const [email, setEmail] = React.useState("");
      const [mensaje, setMensaje] = React.useState("");
      const [selectedProject, setSelectedProject] = React.useState(null);
      React.useEffect(() => {
        if (selectedProject) {
          document.body.style.overflow = "hidden";
          const onKey = (e) => {
            if (e.key === "Escape") setSelectedProject(null);
          };
          window.addEventListener("keydown", onKey);
          return () => {
            window.removeEventListener("keydown", onKey);
            document.body.style.overflow = "";
          };
        }
      }, [selectedProject]);

      const enviarMail = (e) => {
        e.preventDefault();
        const subject = encodeURIComponent("Contacto desde Proyectos Web");
        const body = encodeURIComponent(
          `Nombre: ${nombre}\nEmail: ${email}\n\nMensaje:\n${mensaje}`
        );
        window.location.href = `mailto:navarromunoz.mariafer@gmail.com?subject=${subject}&body=${body}`;
      };

      const proyectos = [
        { 
          title: "Gatitos · Sitio", 
          desc: "Diseño tierno y visual suave.", 
          base: "img/gatitos", 
          fallbacks: ["img/logo"],
          url: "https://gatitos-glotones.vercel.app"
        },
        { 
          title: "EMAV · Página", 
          desc: "Estructura clara y tipografía cuidada.", 
          base: "img/emav", 
          fallbacks: ["img/logo"],
          url: "https://emavchile.com"
        },
        { 
          title: "Mi Cama · UI", 
          desc: "Interfaz enfocada en accesibilidad.", 
          base: "img/micama", 
          fallbacks: ["img/logo"],
          url: "https://webmicama.vercel.app"
        },
      ];

      const proyectoAlma = {
        title: "Alma · WordPress",
        desc: "Sitio implementado y diseñado en WordPress.",
        base: "img/alma",
        url: "https://www.almasilvestre.cl"
      };

      const openProject = (project) => {
        setSelectedProject(project);
      };

      const handleOverlayClick = () => {
        setSelectedProject(null);
      };

      return (
        <div className="min-h-screen bg-black text-white">
          <nav className="fixed w-full z-40 bg-black bg-opacity-80 backdrop-filter backdrop-blur-lg border-b border-white border-opacity-10">
            <div className="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
              <a href="index.html" className="shrink-0" aria-label="Volver a Inicio">
                <img src="img/logo.png" alt="Logo" className="w-12 h-12 object-contain" />
              </a>
              <div className="text-sm text-white/70">
                <a href="grafico.html" className="hover:text-purple-400">Diseño Gráfico</a>
                <span className="mx-2 text-white/30">·</span>
                <a href="sobre.html" className="hover:text-purple-400">Sobre mí</a>
                <span className="mx-2 text-white/30">·</span>
                <a href="contacto.html" className="hover:text-emerald-400">Contacto</a>
              </div>
            </div>
          </nav>

          <header className="pt-28 pb-12 max-w-7xl mx-auto px-6">
            <h1 className="text-5xl md:text-6xl font-black animate-fadeIn">Proyectos Web</h1>
            <p className="mt-4 text-gray-300 max-w-2xl animate-fadeIn" style={{animationDelay: '0.1s'}}>
              Colección de páginas web y desarrollos front-end.
            </p>
          </header>

          <main className="max-w-7xl mx-auto px-6 pb-24">
            <section className="grid grid-cols-1 md:grid-cols-3 gap-6">
              {proyectos.map((card, index) => (
                <div
                  key={card.title}
                  className="group relative rounded-2xl overflow-hidden bg-white bg-opacity-5 animate-fadeIn cursor-pointer"
                  style={{ paddingBottom: "62%", animationDelay: index * 0.05 + "s" }}
                  onClick={() => openProject(card)}
                >
                  <div className="absolute inset-0">
                    <img
                      src={card.base + ".png"}
                      alt={card.title}
                      className="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                      data-i="0"
                      onError={(e) => {
                        const exts = [".jpg", ".jpeg", ".webp", ".JPG", ".PNG", ".JPEG", ".WEBP"];
                        let i = Number(e.currentTarget.dataset.i || 0);
                        if (i < exts.length) {
                          e.currentTarget.src = card.base + exts[i];
                          e.currentTarget.dataset.i = i + 1;
                          return;
                        }
                        // intentar fallbacks con el mismo orden de extensiones
                        const fbIndex = Number(e.currentTarget.dataset.fbIndex || 0);
                        if (card.fallbacks && fbIndex < card.fallbacks.length) {
                          e.currentTarget.src = card.fallbacks[fbIndex] + ".png";
                          e.currentTarget.dataset.fbIndex = fbIndex + 1;
                          e.currentTarget.dataset.i = 0;
                          return;
                        }
                        e.currentTarget.style.display = "none";
                      }}
                    />
                    <div className="absolute inset-0 bg-gradient-to-b from-black/40 to-black/60 opacity-90 group-hover:opacity-80 transition-opacity" />
                  </div>
                  <div className="absolute inset-0 p-6 flex flex-col justify-end">
                    <p className="text-xs uppercase tracking-widest text-white/70">{card.title}</p>
                    <h4 className="text-xl font-semibold mt-1">{card.desc}</h4>
                  </div>
                </div>
              ))}
            </section>

            <section className="mt-12 rounded-2xl p-6 bg-white/5 animate-fadeIn">
              <h3 className="text-2xl font-bold">Proyecto WordPress: Alma</h3>
              <div className="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                <div
                  className="relative rounded-2xl overflow-hidden cursor-pointer"
                  onClick={() => openProject(proyectoAlma)}
                >
                  <img
                    src="img/alma.png"
                    alt="Alma · WordPress"
                    className="w-full h-48 md:h-64 object-cover"
                    data-i="0"
                    onError={(e) => {
                      const exts = [".JPG", ".jpg", ".jpeg", ".webp"];
                      const i = Number(e.currentTarget.dataset.i || 0);
                      if (i < exts.length) {
                        e.currentTarget.src = "img/alma" + exts[i];
                        e.currentTarget.dataset.i = i + 1;
                      } else {
                        e.currentTarget.style.display = "none";
                      }
                    }}
                  />
                  <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" />
                </div>
                <div>
                  <p className="text-white/80">
                    Implementación y diseño del sitio Alma en WordPress. Ajustes visuales, tipografía y paleta suave para una experiencia clara y bonita.
                  </p>
                  <div className="mt-4">
                    <a href="contacto.html" className="inline-flex items-center gap-2 px-5 py-3 rounded-full bg-white/10 hover:bg-white/20 transition">
                      Consultar detalles →
                    </a>
                  </div>
                </div>
              </div>
            </section>

            <div className="mt-16">
              <a href="index.html" className="inline-flex items-center gap-2 px-5 py-3 rounded-full bg-white/10 hover:bg-white/20 transition">
                ← Volver a Inicio
              </a>
            </div>

          </main>
          {selectedProject && (
            <div
              className="fixed inset-0 z-50 bg-black bg-opacity-80 flex items-center justify-center px-4"
              onClick={handleOverlayClick}
            >
              <div className="relative flex items-center justify-center custom-modal-container" onClick={(e) => e.stopPropagation()}>
                <button
                  className="absolute -top-10 right-0 text-sm text-gray-300 hover:text-white"
                  onClick={() => setSelectedProject(null)}
                >
                  Cerrar ✕
                </button>
                <div className="rounded-2xl overflow-hidden bg-white/5 border border-white/10 w-full h-full flex items-center justify-center">
                  <div className="relative">
                    <img
                      src={selectedProject.base + ".png"}
                      alt={selectedProject.title}
                      className="w-auto h-auto object-contain mx-auto bg-black custom-modal-img cursor-pointer"
                      data-i="0"
                      onClick={() => {
                        const features = "menubar=no,toolbar=no,location=no,status=no,scrollbars=yes,resizable=yes";
                        const win = window.open(selectedProject.url, "_blank", features);
                        if (win) try { win.opener = null; } catch (e) {}
                      }}
                      onError={(e) => {
                        const exts = [".jpg", ".jpeg", ".webp", ".JPG", ".PNG", ".JPEG", ".WEBP"];
                        const base = selectedProject.base || "";
                        const i = Number(e.currentTarget.dataset.i || 0);
                        if (i < exts.length) {
                          e.currentTarget.src = base + exts[i];
                          e.currentTarget.dataset.i = i + 1;
                        }
                      }}
                    />
                    
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<WebPage />);
  </script>
</body>
</html>
